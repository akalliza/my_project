<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <style>
    /* Basic styling */
  </style>
</head>
<body>
  <h2>Requests Review</h2>
  <table id="requestsTable" border="1" cellpadding="5">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>School</th>
        <th>Type</th>
        <th>Details</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    async function fetchRequests() {
      const res = await fetch('http://localhost:3000/requests');
      const requests = await res.json();
      const tbody = document.querySelector('#requestsTable tbody');
      tbody.innerHTML = '';

      requests.forEach(req => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${req.name}</td>
          <td>${req.email}</td>
          <td>${req.schoolName}</td>
          <td>${req.requestType}</td>
          <td>${req.details}</td>
          <td>${req.status}</td>
          <td>
            <button onclick="updateStatus('${req._id}', 'Approved')">Approve</button>
            <button onclick="updateStatus('${req._id}', 'Rejected')">Reject</button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    async function updateStatus(id, status) {
      await fetch(`http://localhost:3000/requests/${id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ status }),
      });
      fetchRequests();
    }

    // Load data on page load
    fetchRequests();
  </script>
</body>
</html>